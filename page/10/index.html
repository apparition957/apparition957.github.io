<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="沉迷学习无法自拔"/>













  <link rel="alternate" href="/atom.xml" title="APPARITION957">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="http://apparition957.github.io/page/10/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />






  
  <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8bd9b518a8b821a06877823fceed6cab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>








<meta name="google-site-verification" content="OxwLY0TQSQ2wO159foQs2OK6XTDPDZA_H3N6_pCPnng" />


    <title> APPARITION957 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">APPARITION957</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">APPARITION957</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/03/06/MySQL基本概念-主键-外键-索引/">MySQL基本概念 -- 主键/外键/索引</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-03-06
        </span>
        
          <div class="post-category">
            
              <a href="/categories/MySQL/">MySQL</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h4 id="主键-PRIMARY-KEY"><a href="#主键-PRIMARY-KEY" class="headerlink" title="主键(PRIMARY KEY)"></a><strong>主键(PRIMARY KEY)</strong></h4><p>主键能够唯一标识表中某一行的属性或属性组。</p>
<p>主键是索引的一种，并且是唯一性索引的一种。</p>
<p>主键约束唯一标识数据库表中的每条记录。</p>
<p>主键必须包含唯一的值。</p>
<p>主键列不能包含NULL值。</p>
<p>主键常常与外键构成参照完整性约束，防止出现数据不一致。</p>
<p>每个表应当有一个主键，但每个表<strong>只能</strong>有一个主键。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-- 每一笔订单对应一个唯一的订单编号</div><div class="line">-- 若字段使用AUTO_INCREMENT, 其字段类型必须是TINYINT/SMALLINT/INT/BIGINT其中一种</div><div class="line">CREATE TABLE order (</div><div class="line">	id INT NOT NULL AUTO_INCREMENT,</div><div class="line">  	name VARCHAR(40) NOT NULL,</div><div class="line">  	PRIMARY KEY(id)</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<h4 id="外键-FOREIGN-KEY"><a href="#外键-FOREIGN-KEY" class="headerlink" title="外键(FOREIGN KEY)"></a><strong>外键(FOREIGN KEY)</strong></h4><p><strong>如果一个实体的某个字段指向另一个实体的主键，就称为外键。</strong> 其中,被指向的实体，称之为主实体(主表)。负责指向的实体，称之为从实体(从表)，也叫子实体(子表)。</p>
<p><strong>主要作用维护两个表之间的数据一致性，加强两个表数据之间的链接的一列或多列。</strong> 每当子表中的字段需要添加记录时，必须查询父表中是否存在该字段记录。需要删除父表中的主键时，则必须查询是否有其他表的外键与其绑定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">-- 每样商品都有特定的商品种类(电脑对应电子产品, 口红对应化妆品)</div><div class="line">CREATE TABLE mb_item_type (</div><div class="line">	id INT NOT NULL AUTO_INCREMENT,</div><div class="line">  	type VARCHAR(200) NOT NULL,</div><div class="line">  	PRIMARY KEY(id)</div><div class="line">);</div><div class="line"></div><div class="line">INSERT INTO mb_item_type (type) VALUES (&apos;电子产品&apos;), (&apos;化妆品&apos;);</div><div class="line"></div><div class="line">CREATE TABLE item (</div><div class="line">	id INT NOT NULL AUTO_INCREMENT,</div><div class="line">  	name VARCHAR(200) NOT NULL,</div><div class="line">  	type_id INT NOT NULL,</div><div class="line">  	PRIMARY KEY(id),</div><div class="line">  	FOREIGN KEY(type_id) REFERENCES mb_item_type(id)</div><div class="line">);</div><div class="line"></div><div class="line">-- 对应相应的商品序号</div><div class="line">INSERT INTO item (name, type_id) VALUES (&apos;thinkpad&apos;, 1);</div><div class="line">INSERT INTO item (name, type_id) VALUES (&apos;口红&apos;, 2);</div><div class="line"></div><div class="line">-- 错误输入, 因为在mb_item_type中不存在序号为3的记录</div><div class="line">INSERT INTO item (name, type_id) VALUES (&apos;相机&apos;, 3);</div></pre></td></tr></table></figure>
<p>是用来快速地寻找那些具有特定值的记录。主要是为了检索的方便，是为了加快访问速度， 按一定的规则创建的，一般起到排序作用。</p>
<hr>
<h4 id="唯一性索引-UNIQUE"><a href="#唯一性索引-UNIQUE" class="headerlink" title="唯一性索引(UNIQUE)"></a><strong>唯一性索引(UNIQUE)</strong></h4><p>UNIQUE 约束唯一标识数据库表中的每条记录。</p>
<p>UNIQUE 和 PRIMARY KEY 约束均为列或列集合提供了唯一性的保证。</p>
<p>PRIMARY KEY 拥有自动定义的 UNIQUE 约束。</p>
<p><strong>每个表可以有多个 UNIQUE 约束，但是每个表只能有一个 PRIMARY KEY 约束</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-- 一名学生对应一个唯一学号</div><div class="line">CREATE TABLE student (</div><div class="line">	id INT NOT NULL AUTO_INCREMENT,</div><div class="line">  	name VARCHAR(40) NOT NULL,</div><div class="line">  	student_id INT NOT NULL,</div><div class="line">  	PRIMARY KEY(id),</div><div class="line">  	UNIQUE KEY student_unique_id (student_id) USING BTREE</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<h4 id="索引-KEY"><a href="#索引-KEY" class="headerlink" title="索引(KEY)"></a><strong>索引(KEY)</strong></h4><p>根据特定的算法，来快速地查找到具有特定值(按一定的规则创建)的记录。</p>
<p>主要作用是为了检索的方便，是为了加快访问速度。</p>
<p>详细参见<a href="http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html" target="_blank" rel="external">http://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html</a></p>
<hr>
<p>参考文章:</p>
<p>[1] <a href="http://blog.csdn.net/duck_arrow/article/details/8264686" target="_blank" rel="external">http://blog.csdn.net/duck_arrow/article/details/8264686</a></p>
<p>[2] <a href="http://www.cnblogs.com/zunpeng/p/3878459.html" target="_blank" rel="external">http://www.cnblogs.com/zunpeng/p/3878459.html</a></p>
<p>[3] <a href="http://www.w3school.com.cn/sql/" target="_blank" rel="external">http://www.w3school.com.cn/sql/</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/28/Spring框架中-Controller类下的返回值/">Spring框架中@Controller类下的返回值</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-02-28
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Spring/">Spring</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>Spring中Controller返回值</p>
<ul>
<li><p>返回String</p>
<ul>
<li><p>根据字符串名返回需要相应在/templates下的html文件</p>
<p>需要同时返回数据时, 只需要在Controller内部声明<code>Model</code>/<code>ModelMap&lt;String, Object&gt;</code>添加数据即可</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/save"</span>, method=RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Demo demo, Model model)</span> </span>&#123;</div><div class="line">  	model.addAttribute(<span class="string">"msg"</span>, <span class="string">"Success"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">"success"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>重定向(redirect)</p>
<p>浏览器中url会进行改变, 但是重定向的页面无法传递request请求, 只能够重新创建request并提交</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/save"</span>, method=RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Demo demo)</span> </span>&#123;</div><div class="line"> 	<span class="keyword">return</span> <span class="string">"redirect:/demo/detail"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>页面转发(forward)</p>
<p>浏览器中url不会改变, 但是会将到这个页面<code>(/save)</code>的request传递到指定页面<code>(/demo/detail)</code>, 保证数据一致性</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/save"</span>, method=RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Demo demo)</span> </span>&#123;</div><div class="line"> 	<span class="keyword">return</span> <span class="string">"forward:/demo/detail"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p><code>@ResponseBody</code></p>
<p>方法上声明了<code>@ResponseBody</code>注解, 则会将返回的数据(String/Model)直接输出到页面中(String/JSON)</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/print"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">print</span><span class="params">()</span></span>&#123;</div><div class="line">	String message = <span class="string">"Hello World, Spring MVC!"</span>;</div><div class="line">	<span class="keyword">return</span> message;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
<ul>
<li><p>返回ModelAndView</p>
<p>定义ModelAndView对象并返回, 对象中可添加model数据、指定view</p>
<p>ModelAndView中可以设置view, 同时也可以设置model对视图进行渲染</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/save"</span>, method=RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">save</span><span class="params">(Demo demo)</span> </span>&#123;</div><div class="line">	ModelAndView mav = <span class="keyword">new</span> ModelAndView(<span class="string">"hello"</span>);<span class="comment">//实例化一个VIew的ModelAndView实例  </span></div><div class="line">	mav.addObject(<span class="string">"message"</span>, <span class="string">"Hello World!"</span>);<span class="comment">//添加一个带名的model对象  </span></div><div class="line">    <span class="keyword">return</span> mav;            </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>返回void</p>
<p>对应返回的视图就是路由路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/demo/get"</span>, method=RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDemo</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span>; <span class="comment">// 返回的视图名称为demo文件夹下的get.html         </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p><code>@Controller</code>注释的类中的方法都可以直接通过HttpServletRequest和HttpServletResponse控制request和response</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/demo/get"</span>, method=RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDemo</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</div><div class="line">  	<span class="comment">// 根据HTTP协议获取及传递 </span></div><div class="line">	<span class="keyword">return</span>;         </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>参考资料:</p>
<p>[1] <a href="http://www.cnblogs.com/liuwt365/p/5686659.html" target="_blank" rel="external">http://www.cnblogs.com/liuwt365/p/5686659.html</a></p>
<p>[2] <a href="http://www.cnblogs.com/xiepeixing/p/4243801.html" target="_blank" rel="external">http://www.cnblogs.com/xiepeixing/p/4243801.html</a></p>
<p>[3] <a href="http://itroop.iteye.com/blog/263845" target="_blank" rel="external">http://itroop.iteye.com/blog/263845</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/27/Spring框架中的注解/">Spring框架中的注解</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-02-27
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Spring/">Spring</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p><code>@RestController</code></p>
<p><code>@RestController</code>结合了<code>@Controller</code>和<code>@ResponseBody</code>方便实现RESTful服务的注解</p>
<p>当返回的是对象时, 会以JSON数据进行传输</p>
<hr>
<p><code>@Controller</code></p>
<p>用于标注控制层组件</p>
<hr>
<p><code>@RequestMapping</code></p>
<p>用于处理请求地址映射的注解, 可用于类或方法上</p>
<p>当作用于类上时, 表示类中的所有响应请求的方法以该注解上的地址作为父级路径</p>
<ul>
<li><p>value</p>
<p><code>@RequestMapping(value=&quot;/&quot;)(显示声明)</code>或 <code>@RequestMapping(&quot;/&quot;)(隐式声明)</code></p>
<p>指定请求的实际路由, 可分为以下三类:</p>
<ol>
<li><p>普通的URI</p>
<p>value=”/demo”</p>
</li>
<li><p>含有某变量的URI</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value=<span class="string">"/get/&#123;year&#125;/&#123;month&#125;/&#123;day&#125;"</span></div></pre></td></tr></table></figure>
</li>
<li><p>含有正则表达式的URI</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value=<span class="string">"/spring-web/&#123;symbolicName: [a-z-]+&#125;-&#123;version: \d.\d.\d&#125;.&#123;extension: \\.[a-z]&#125;"</span></div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>method</p>
<p><code>@RequestMapping(method=&quot;POST&quot;)</code>或 <code>@RequestMapping(method=RequestMethod.GET)</code></p>
<p>指定请求的method类型</p>
</li>
<li><p>consumes</p>
<p><code>@RequestMapping(consumes=&quot;text/html&quot;)</code></p>
<p>指定处理请求的提交内容类型(Content-Type), 例如:application/json, text/html</p>
</li>
<li><p>produces</p>
<p><code>@RequestMapping(produces=&quot;text/html&quot;)</code></p>
<p>指定返回的内容类型, 当且仅当request请求头里面Accept类型中包含该指定类型才返回</p>
</li>
<li><p>params</p>
<p><code>@RequestMapping(params={&quot;username=kobe&quot;, &quot;password=123456&quot;})</code></p>
<p>指定request中必须包含某些指定的参数值, 才会正常处理该响应</p>
</li>
<li><p>headers</p>
<p><code>@RequestMapping(headers={})</code></p>
<p>指定request中必须包含某些指定的header值  , 才会正常处理该响应</p>
</li>
</ul>
<p>常用的辅助注解:</p>
<p><code>@RequestParam</code></p>
<p>针对于提交的表格信息进行直接获取, 也可以通过HttpServletRequest对表格信息进行间接获取(request.getParameter(“name”))</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 前端代码 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/getForm"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"jianpeng"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 后端代码</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/getForm"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getForm</span><span class="params">(@RequestForm String name)</span> </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>@RequestBody</code></p>
<p>接收JSON对象的字符串形式, 而非JSON对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/getJson"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getJson</span><span class="params">(@RequestBody List&lt;User&gt; users)</span> </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>@PathVariable</code></p>
<p>当@RequestMapping(“/{day}”)中含有动态变量时, 可在响应方法的参数列表中声明该形式参数为路由中的参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/&#123;day&#125;"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDay</span><span class="params">(@PathVariable @DateTimeFormat(iso=ISO.DATE)</span> Date day) </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>@ResponseBody</code></p>
<p>表示处理函数直接将函数的返回值传回到浏览器端显示</p>
<hr>
<p><code>@Resource</code>与<code>@Autowired</code></p>
<p>都可用于装配bean, 即可写在字段上, 也可写在setter方法上. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * 通过在变量上进行注解优先级大于在setter方法上进行注解</span></div><div class="line"><span class="comment"> * 因为可以在不暴露setter方法的情况下, 使代码更加紧凑, 提高封装性</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="meta">@Resource</span></div><div class="line"><span class="keyword">private</span> String name;</div><div class="line"></div><div class="line"><span class="comment">// 通过@Resource注解注入与setter形参上变量名称相同的bean</span></div><div class="line"><span class="meta">@Resource</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>@Autowired</code></p>
<p>默认按类型装配(该注解属于Spring框架中), 默认情况下必须要求依赖对象存在, 如果允许null值, 则可以设置它的required属性为false, 如: @Autowired(required=”false”)</p>
<p><code>@Autowired</code>也可指定name来装配bean, 但必须与@Qualifier一起搭配使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Autowired</span> <span class="meta">@Qualifier</span>(<span class="string">"baseDao"</span>)</div><div class="line"><span class="keyword">private</span> BaseDao baseDao;</div></pre></td></tr></table></figure>
<p><code>@Resource</code></p>
<p>默认按变量名进行装配(该注解属于JDK中), 名称可以通过name制定, 如: @Resource(name=”baseName”), 但如果一旦按照name制定, 则只会通过name进行装配工作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Resource</span></div><div class="line"><span class="keyword">private</span> BaseDao baseDao;</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>虽然两者作用的同一地方的不同部分, 但实际开发工作中的作用是一样的, 最好进行统一即可</strong></p>
</blockquote>
<hr>
<p><code>@Service</code></p>
<p>用于标注业务(服务)层组件</p>
<hr>
<p><code>@Repository</code></p>
<p>用于标注持久层, 即数据访问层(DAO)组件</p>
<hr>
<p><code>@Component</code></p>
<p>泛指组件, 在spring2.5前@Service、@Controller和@Repository三种不同层的注解统称为@Component</p>
<p>在含义不清时可以暂时给一个应用层进行分类时可使用</p>
<hr>
<p><code>@EnableWebMvc</code></p>
<p>完全控制<strong>Spring MVC, 你可以在<code>@Configuration</code>注解的配置类上</strong>增加@EnableWebMvc<strong>, 增加该注解以后<code>WebMvcAutoConfiguration</code>中配置就不会生效, 你需要</strong>自己来配置需要的每一项**. 这种情况下的配置方法建议参考<code>WebMvcAutoConfiguration</code>类</p>
<hr>
<p><code>@Bean</code></p>
<p>用于该类/方法/变量可注册为Bean并交由Spring管理(可通过name指定需要管理的Bean的名字)</p>
<hr>
<p><code>@Value</code></p>
<p>用于从配置文件中获取值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(&#123;spring.database.username&#125;)</div><div class="line"><span class="keyword">private</span> String username = <span class="string">'root'</span>;</div></pre></td></tr></table></figure>
<p>当<code>@Value</code>无法获取值且被注解的变量中存在赋值时, 则使用设计者直接主动赋予的变量值作为默认值</p>
<hr>
<p><code>@Import</code></p>
<p>用于导入不同包下java类文件, 并交由Spring管理其中的已注册的Bean</p>
<hr>
<p><code>@ImportResource</code></p>
<p>用于引入基于XML的配置文件, 同理向上</p>
<ul>
<li><p>locations</p>
<p>从外部导入文件的路径, 有两种形式:</p>
<ul>
<li><p>classpath - 从工程/resource下导入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">locations=&#123;<span class="string">"classpath:application-bean1.xml"</span>, <span class="string">"classpath:application-bean2.xml"</span>&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>file - 从系统中以绝对路径的形式导入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">locations=&#123;<span class="string">"file:d:/demo/application-bean3.xml"</span>&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<hr>
<p><code>@EnableAutoConfiguration</code></p>
<p>用于表明Spring Boot可以根据添加的jar依赖猜测你想如何配置Spring</p>
<p>作用于<code>@Configuration</code>下的常见的@EnableXX注解</p>
<p><code>@EnableAspectJAutoProxy</code> 开启对AspectJ自动代理的支持<br><code>@EnableAsync</code> 开启异步方法的支持<br><code>@EnableScheduling</code> 开启计划任务的支持<br><code>@EnableWebMvc</code> 开启Web MVC的配置支持.<br><code>@EnableConfigurationProperties</code>开启对@ConfigurationProperties注解配置Bean的支持.<br><code>@EnableJpaRepositories</code>开启对Spring Data JPA Repository的支持.<br><code>@EnableTransactionManagement</code> 开启注解式事务的支持.<br><code>@EnableCaching</code>开启注解式的缓存支持</p>
<hr>
<p><code>@ComponentScan</code></p>
<p>作用于配置类上, 用于扫描主程序位于的包以及子包下的所有组件(<code>@Component</code>/<code>@Controller</code>/<code>@Service</code>/<code>@Repository</code>)</p>
<hr>
<p>Spring集成了基于JSR-303的Bean Validation框架, 支持设计者进行数据校验工作</p>
<blockquote>
<p>JSR-303是一个数据验证的规范</p>
<p>Bean Validation是一个通过配置注解来验证参数的框架, 它包含两部分Bean Validation API和Hibernate Validator. </p>
<ul>
<li>Bean Validation API是Java定义的一个验证参数的规范. </li>
<li>Hibernate Validator是Bean Validation API的一个实现扩展. </li>
</ul>
</blockquote>
<h2 id="Bean-Validation-中的-constraint"><a href="#Bean-Validation-中的-constraint" class="headerlink" title="Bean Validation 中的 constraint"></a>Bean Validation 中的 constraint</h2><h5 id="表-1-Bean-Validation-中内置的-constraint"><a href="#表-1-Bean-Validation-中内置的-constraint" class="headerlink" title="表 1. Bean Validation 中内置的 constraint"></a>表 1. Bean Validation 中内置的 constraint</h5><table>
<thead>
<tr>
<th><strong>Constraint</strong></th>
<th><strong>详细信息</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Null</code></td>
<td>被注释的元素必须为 <code>null</code></td>
</tr>
<tr>
<td><code>@NotNull</code></td>
<td>被注释的元素必须不为 <code>null</code></td>
</tr>
<tr>
<td><code>@AssertTrue</code></td>
<td>被注释的元素必须为 <code>true</code></td>
</tr>
<tr>
<td><code>@AssertFalse</code></td>
<td>被注释的元素必须为 <code>false</code></td>
</tr>
<tr>
<td><code>@Min(value)</code></td>
<td>被注释的元素必须是一个数字, 其值必须大于等于指定的最小值</td>
</tr>
<tr>
<td><code>@Max(value)</code></td>
<td>被注释的元素必须是一个数字, 其值必须小于等于指定的最大值</td>
</tr>
<tr>
<td><code>@DecimalMin(value)</code></td>
<td>被注释的元素必须是一个数字, 其值必须大于等于指定的最小值</td>
</tr>
<tr>
<td><code>@DecimalMax(value)</code></td>
<td>被注释的元素必须是一个数字, 其值必须小于等于指定的最大值</td>
</tr>
<tr>
<td><code>@Size(max, min)</code></td>
<td>被注释的元素的大小必须在指定的范围内</td>
</tr>
<tr>
<td><code>@Digits (integer, fraction)</code></td>
<td>被注释的元素必须是一个数字, 其值必须在可接受的范围内</td>
</tr>
<tr>
<td><code>@Past</code></td>
<td>被注释的元素必须是一个过去的日期</td>
</tr>
<tr>
<td><code>@Future</code></td>
<td>被注释的元素必须是一个将来的日期</td>
</tr>
<tr>
<td><code>@Pattern(value)</code></td>
<td>被注释的元素必须符合指定的正则表达式</td>
</tr>
</tbody>
</table>
<h5 id="表-2-Hibernate-Validator-附加的-constraint"><a href="#表-2-Hibernate-Validator-附加的-constraint" class="headerlink" title="表 2. Hibernate Validator 附加的 constraint"></a>表 2. Hibernate Validator 附加的 constraint</h5><table>
<thead>
<tr>
<th><strong>Constraint</strong></th>
<th><strong>详细信息</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Email</code></td>
<td>被注释的元素必须是电子邮箱地址</td>
</tr>
<tr>
<td><code>@Length</code></td>
<td>被注释的字符串的大小必须在指定的范围内</td>
</tr>
<tr>
<td><code>@NotEmpty</code></td>
<td>被注释的字符串的必须非空</td>
</tr>
<tr>
<td><code>@Range</code></td>
<td>被注释的元素必须在合适的范围内</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>@Valid</code> - 注释要求要对该参数/变量通过校验器进行校验**</p>
</blockquote>
<p>Spring一旦发现<code>@Valid</code>注解, 就会根据<strong>被注解类中的注解规则</strong>进行数据校验, 所以如果当数据不符合校验规则, 会出现如下错误提示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Whitelabel Error PageThis application has no explicit mapping for /error, so you are seeing this as a fallback.Fri Aug 21 10:09:54 CST 2015There was an unexpected error (type=Bad Request, status=400).Validation failed for object='post'. Error count: 2</div></pre></td></tr></table></figure>
<p>但为了让用户体验更加良好, 我们需要将自定义的错误页面呈现出来, 以下为有错误时的处理代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/"</span>, method = RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">create</span><span class="params">(@Valid Demo demo, BindingResult result)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (result.hasErrors()) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">return</span> <span class="string">"demo"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>@ControllerAdvice</p>
<p>可视为一种增强版拦截器. 能把@ControllerAdvice注解内部所使用的@ExceptionHandler、@InitBinder、@ModelAttribute注解的方法应用到所有(或特定)的 @RequestMapping注解的方法. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalDefaultExceptionHandler</span> </span>&#123;</div><div class="line">	</div><div class="line">  	<span class="comment">// 可返回任意数据/页面, 与Controller同样用法</span></div><div class="line">  	<span class="meta">@ExceptionHanlder</span>(value=Exception.class)</div><div class="line">  	<span class="function"><span class="keyword">public</span> voud <span class="title">defaultErrorHandler</span><span class="params">(HttpServletRequest req, Exception e)</span> </span>&#123;</div><div class="line">      	e.printStackTrace();</div><div class="line">      	System.out.println(<span class="string">"GlobalDefaultExceptionHandler.defaultErrorHandler() raise"</span>);</div><div class="line">  	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>默认情况 - 全局拦截</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span></div></pre></td></tr></table></figure>
</li>
<li><p>仅在内部添加字符串(不声明属性名) - 作用于指定的包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span>(<span class="string">"com.example.contoller"</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>assignableTypes - 作用于指定的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span>(assignableTypes=&#123;ControllerA.class, ControllerB.class&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>annotations - 作用于指定的注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ControllerAdvice</span>(annotations=RestController.class)</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p>@ManyToOne 与 @OneToMany</p>
<p>@ManyToOne 从字面意思可知为 多对一, @OneToMany 为 一对多. </p>
<p>以上解释好比于书单与图书的关系, 一张书单可以对应多本不同图书, 一本图书可以对应多张书单. JPA通过其中的映射关系将获取的值注入到被注释的变量中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</div><div class="line">  	<span class="meta">@Id</span></div><div class="line">  	<span class="meta">@GeneratedValue</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">long</span> id;</div><div class="line">  </div><div class="line">    <span class="comment">/*  </span></div><div class="line"><span class="comment">     * @OneToMany: 指明Order与OrderItem关联关系为一对多关系 </span></div><div class="line"><span class="comment">     *  </span></div><div class="line"><span class="comment">     * mappedBy: 定义类之间的双向关系. 如果类之间是单向关系, 不需要提供定义, 如果类和类之间形成双向关系, 我们就需要使用这个属性进行定义, 否则可能引起数据一致性的问题.  </span></div><div class="line"><span class="comment">     *  </span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * cascade: CascadeType[]类型. 该属性定义类和类之间的级联关系. 定义的级联关系将被容器视为对当前类对象及其关联类对象采取相同的操作,  </span></div><div class="line"><span class="comment">     * 而且这种关系是递归调用的. 举个例子：Order 和OrderItem有级联关系, 那么删除Order 时将同时删除它所对应的OrderItem对象.  </span></div><div class="line"><span class="comment">     * 而如果OrderItem还和其他的对象之间有级联关系, 那么这样的操作会一直递归执行下去. cascade的值只能从CascadeType.PERSIST（级联新建）、CascadeType.REMOVE（级联删除）、CascadeType.REFRESH（级联刷新）、CascadeType.MERGE（级联更新）中选择一个或多个.  </span></div><div class="line"><span class="comment">     * 还有一个选择是使用CascadeType.ALL, 表示选择全部四项.  </span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * fatch: 可选择项包括：FetchType.EAGER 和FetchType.LAZY. 前者表示关系类(本例是OrderItem类)在主类(本例是Order类)加载的时候同时加载; 后者表示关系类在被访问时才加载,默认值是FetchType.LAZY.  </span></div><div class="line"><span class="comment">     *  </span></div><div class="line"><span class="comment">     */</span>  </div><div class="line">  	<span class="meta">@OneToMany</span>(mappedBy=<span class="string">"order"</span>, cascade=CascadeType.ALL, fetch=FetchType.LAZY)</div><div class="line">  	<span class="meta">@Order</span>(value=<span class="string">"id ASC"</span>)</div><div class="line">  	<span class="keyword">private</span> List&lt;OrderItem&gt; OrderItems;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderItem</span> </span>&#123;</div><div class="line">  	<span class="meta">@Id</span></div><div class="line">  	<span class="meta">@GeneratedValue</span></div><div class="line">  	<span class="keyword">private</span> <span class="keyword">int</span> id;</div><div class="line"> </div><div class="line">    <span class="comment">/* </span></div><div class="line"><span class="comment">     * @ManyToOne指明OrderItem和Order之间为多对一关系, 多个OrderItem实例关联的都是同一个Order对象.  </span></div><div class="line"><span class="comment">     * 其中的属性和@OneToMany基本一样, 但@ManyToOne注释的fetch属性默认值是FetchType.EAGER.  </span></div><div class="line"><span class="comment">     *  </span></div><div class="line"><span class="comment">     * optional 属性是定义该关联类对是否必须存在.  </span></div><div class="line"><span class="comment">     * 值为false时, 关联类双方都必须存在, 如果关系被维护端不存在, 查询的结果为null.  </span></div><div class="line"><span class="comment">     * 值为true 时, 关系被维护端可以不存在, 查询的结果仍然会返回关系维护端, 在关系维护端中指向关系被维护端的属性为null.  </span></div><div class="line"><span class="comment">     * optional 属性的默认值是true. 举个例：某项订单(Order)中没有订单项(OrderItem), 如果optional 属性设置为false, 获取该项订单（Order）时, 得到的结果为null, 如果optional 属性设置为true, 仍然可以获取该项订单, 但订单中指向订单项的属性为null.  </span></div><div class="line"><span class="comment">     * 实际上在解释Order与OrderItem的关系成SQL时, optional 属性指定了他们的联接关系optional=false联接关系为inner join,  </span></div><div class="line"><span class="comment">     * optional=true联接关系为left join.  </span></div><div class="line"><span class="comment">     *  </span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * @JoinColumn:指明了被维护端（OrderItem）的外键字段为order_id, 它和维护端的主键(order_id)连接, unique=true指明order_id列的值不可重复.  </span></div><div class="line"><span class="comment">     */</span>  </div><div class="line">	<span class="meta">@ManyToOne</span>(cascade=CascadeType.REFRESH, optional=<span class="keyword">false</span>)  </div><div class="line">	<span class="meta">@JoinColumn</span>(name=<span class="string">"order_id"</span>, referencedColumnName=<span class="string">"order_id"</span>)  </div><div class="line">	<span class="keyword">private</span> Order order;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>@Transactional</p>
<p>表明指定类(通常为Service类)下的所有方法或表明某些指定的方法需要进行事务管理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="meta">@Transactional</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoServiceImpl</span> <span class="keyword">implements</span> <span class="title">DemoService</span> </span>&#123;</div><div class="line">	...  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Transactional注解中常用参数说明"><a href="#Transactional注解中常用参数说明" class="headerlink" title="Transactional注解中常用参数说明"></a><strong>Transactional注解中常用参数说明</strong></h1><table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>功能描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>readOnly</strong></td>
<td>该属性用于设置当前事务是否为只读事务，设置为true表示只读，false则表示可读写，默认值为false。例如：@Transactional(readOnly=true)</td>
</tr>
<tr>
<td><strong>rollbackFor</strong></td>
<td>该属性用于设置需要进行回滚的异常类数组，当方法中抛出指定异常数组中的异常时，则进行事务回滚。例如：指定单一异常类：@Transactional(rollbackFor=RuntimeException.class)指定多个异常类：@Transactional(rollbackFor={RuntimeException.class, Exception.class})</td>
</tr>
<tr>
<td><strong>rollbackForClassName</strong></td>
<td>该属性用于设置需要进行回滚的异常类名称数组，当方法中抛出指定异常名称数组中的异常时，则进行事务回滚。例如：指定单一异常类名称：@Transactional(rollbackForClassName=”RuntimeException”)指定多个异常类名称：@Transactional(rollbackForClassName={“RuntimeException”,”Exception”})</td>
</tr>
<tr>
<td><strong>noRollbackFor</strong></td>
<td>该属性用于设置不需要进行回滚的异常类数组，当方法中抛出指定异常数组中的异常时，不进行事务回滚。例如：指定单一异常类：@Transactional(noRollbackFor=RuntimeException.class)指定多个异常类：@Transactional(noRollbackFor={RuntimeException.class, Exception.class})</td>
</tr>
<tr>
<td><strong>noRollbackForClassName</strong></td>
<td>该属性用于设置不需要进行回滚的异常类名称数组，当方法中抛出指定异常名称数组中的异常时，不进行事务回滚。例如：指定单一异常类名称：@Transactional(noRollbackForClassName=”RuntimeException”)指定多个异常类名称：@Transactional(noRollbackForClassName={“RuntimeException”,”Exception”})</td>
</tr>
<tr>
<td><strong>propagation</strong></td>
<td>该属性用于设置事务的传播行为, 例如：@Transactional(propagation=Propagation.NOT_SUPPORTED,readOnly=true)</td>
</tr>
<tr>
<td><strong>isolation</strong></td>
<td>该属性用于设置底层数据库的事务隔离级别，事务隔离级别用于处理多事务并发的情况，通常使用数据库的默认隔离级别即可，基本不需要进行设置</td>
</tr>
<tr>
<td><strong>timeout</strong></td>
<td>该属性用于设置事务的超时秒数，默认值为-1表示永不超时</td>
</tr>
</tbody>
</table>
<ul>
<li>propagation<ul>
<li>@Transactional(propagation=Propagation.REQUIRED) ：如果有事务, 那么加入事务, 没有的话新建一个(默认情况下)</li>
<li>@Transactional(propagation=Propagation.NOT_SUPPORTED) ：容器不为这个方法开启事</li>
<li>@Transactional(propagation=Propagation.REQUIRES_NEW) ：不管是否存在事务,都创建一个新的事务,原来的挂起,新的执行完毕,继续执行老的事务</li>
<li>@Transactional(propagation=Propagation.MANDATORY) ：必须在一个已有的事务中执行,否则抛出异常</li>
<li>@Transactional(propagation=Propagation.NEVER) ：必须在一个没有的事务中执行,否则抛出异常(与Propagation.MANDATORY相反)</li>
<li>@Transactional(propagation=Propagation.SUPPORTS) ：如果其他bean调用这个方法,在其他bean中声明事务,那就用事务.如果其他bean没有声明事务,那就不用事务.</li>
</ul>
</li>
</ul>
<hr>
<p>@Async - 异步</p>
<hr>
<p>@Cacheable 创建</p>
<p>@CachePut 更新</p>
<p>@CacheEvict 删除</p>
<hr>
<p>@Scheduled</p>
<hr>
<p>@NamedQuery</p>
<hr>
<p>@Modifying</p>
<p>@Query</p>
<hr>
<p>@EnableEurekaClient</p>
<p>@EnableDiscoveryClient</p>
<hr>
<p>@Profile</p>
<hr>
<p>参考文章:</p>
<p>[1] <a href="http://www.importnew.com/18561.html" target="_blank" rel="external">http://www.importnew.com/18561.html</a></p>
<p>[2] <a href="https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/" target="_blank" rel="external">https://www.ibm.com/developerworks/cn/java/j-lo-jsr303/</a></p>
<p>[3] <a href="https://course.tianmaying.com/web-development+form-validation#0" target="_blank" rel="external">https://course.tianmaying.com/web-development+form-validation#0</a></p>
<p>[4] <a href="http://blog.longjiazuo.com/archives/1366" target="_blank" rel="external">http://blog.longjiazuo.com/archives/1366</a></p>
<p>[5] <a href="http://jinnianshilongnian.iteye.com/blog/1866350" target="_blank" rel="external">http://jinnianshilongnian.iteye.com/blog/1866350</a></p>
<p>[6] <a href="http://lym6520.iteye.com/blog/312125" target="_blank" rel="external">http://lym6520.iteye.com/blog/312125</a></p>
<p>[7] <a href="http://www.cnblogs.com/caoyc/p/5632963.html" target="_blank" rel="external">http://www.cnblogs.com/caoyc/p/5632963.html</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/06/利用服务器快速搭建Wordpress/">利用服务器快速搭建Wordpress</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-02-06
        </span>
        
          <div class="post-category">
            
              <a href="/categories/生活技能/">生活技能</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>虽然是一篇傻瓜式安装Wordpress的文章, 但其中也包含了不少搭建时碰到的困难.</p>
<ol>
<li><p>配置服务器现有的操作系统</p>
<p>选择适合Wordpress的操作系统(一般都是CentOS), 上面会有配置相关所需环境<br><img src="http://on83riher.bkt.clouddn.com/1.jpg" alt="img"></p>
</li>
<li><p>打开wordpress安装指引</p>
<p>根据服务器的公网IP在浏览器打开页面, 会显示wordpress的著名”五分钟安装”页面<br><img src="http://on83riher.bkt.clouddn.com/2.jpg" alt="img"></p>
</li>
<li><p>在安装页面中输入相关信息<br><img src="http://on83riher.bkt.clouddn.com/4-1.jpg" alt="img"></p>
<blockquote>
<p><strong>密码</strong>:<br> 使用各大服务商推荐的系统进行安装, 它们都会设置好mysql的初始密码, 此时需要根据下面步骤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 1. 查看根目录是否存在default.pass类似的文本文档</div><div class="line">ls</div><div class="line">// 2. 若存在则打开该文件, 查看内部记录的数据库信息</div><div class="line">vim default.pass</div></pre></td></tr></table></figure>
<p><strong>数据库主机</strong>:</p>
<p><strong>localhost</strong><br>不联网<br>不使用网卡，不受防火墙和网卡限制<br>本机访问</p>
<p><strong>127.0.0.1(这是我们需要正确填上的信息)</strong><br>不联网<br>网卡传输，受防火墙和网卡限制<br>本机访问</p>
<p><strong>本机IP</strong><br>联网<br>网卡传输 ，受防火墙和网卡限制<br>本机或外部访问</p>
</blockquote>
</li>
<li><p>完成</p>
<p><img src="http://on83riher.bkt.clouddn.com/6.jpg" alt="img"></p>
</li>
</ol>
<hr>
<p>相关资料来源于:</p>
<ol>
<li><a href="http://blog.csdn.net/dqjyong/article/details/21238257" target="_blank" rel="external">http://blog.csdn.net/dqjyong/article/details/21238257</a></li>
<li><a href="http://blog.csdn.net/dqjyong/article/details/21238257" target="_blank" rel="external">http://blog.csdn.net/dqjyong/article/details/21238257</a></li>
</ol>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/page/9/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">上一页</span>
      </a>
    
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:jianpeng957@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">jianpeng957</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
